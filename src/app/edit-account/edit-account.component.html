<app-navbar></app-navbar>
<div class="container">
  <mat-card class="card">
    <div>
      <h1>Change Password
        <button class="btn btn-link" (click)="togglePasswordDetails()">Toggle Password Fields</button>
      </h1>
    </div>
    <form *ngIf="showAccountPassword" (ngSubmit)="onSubmitPassword()">
      <div *ngIf="!isFormValidPassword" class="alert alert-danger">Please fill in all required fields</div>
      <div *ngIf="!isFormNewPasswordsMatch" class="alert alert-danger">New passwords do not match</div>
      <div *ngIf="!isFormPasswordMatch" class="alert alert-danger">Current password is incorrect</div>
      <div class="form-group">
        <label for="new_password">New Password</label>
        <div class="input-group">
          <input type="{{ showNewPassword ? 'text' : 'password' }}" class="form-control" id="new_password" name="new_password" [(ngModel)]="newPassword">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" (click)="showNewPassword = !showNewPassword">
              {{ showNewPassword ? 'Hide' : 'Show' }}
            </button>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="retype_password">Retype Password</label>
        <div class="input-group">
          <input type="{{ showRetypePassword ? 'text' : 'password' }}" class="form-control" id="retype_password" name="retype_password" [(ngModel)]="retypePassword">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" (click)="showRetypePassword = !showRetypePassword">
              {{ showRetypePassword ? 'Hide' : 'Show' }}
            </button>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="current_password">Current Password</label>
        <div class="input-group">
          <input type="{{ showCurrentPassword ? 'text' : 'password' }}" class="form-control" id="current_password" name="current_password" [(ngModel)]="currentPassword">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" (click)="showCurrentPassword = !showCurrentPassword">
              {{ showCurrentPassword ? 'Hide' : 'Show' }}
            </button>
          </div>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Change Password</button>
    </form>
  </mat-card>
</div>

<br>

<div class="container">
  <mat-card class="card">
    <div>
      <h1>Account Information
        <button class="btn btn-link" (click)="toggleAccountDetails()">Toggle Personal Information Fields</button>
      </h1>
    </div>
    
    <form *ngIf="showAccountDetails" (ngSubmit)="onSubmit()">
      <div *ngIf="!isFormValid" class="alert alert-danger">Please fill in all required fields</div>
      <div *ngIf="!isFormPasswordMatchAccount" class="alert alert-danger">Password is incorrect</div>
      <div class="form-group">
        <label>Email</label>
        <p>{{tmp.email}}</p>
      </div>
      <div class="form-group">
        <label for="account_name">Account Name</label>
        <input type="text" class="form-control" id="account_name" name="account_name" [(ngModel)]="tmp.account_name">
      </div>
      <div class="form-group">
        <label for="first_name">First Name</label>
        <input type="text" class="form-control" id="first_name" name="first_name" [(ngModel)]="tmp.first_name">
      </div>
      <div class="form-group">
        <label for="last_name">Last Name</label>
        <input type="text" class="form-control" id="last_name" name="last_name" [(ngModel)]="tmp.last_name">
      </div>
      
      <div class="form-group">
        <label for="current_password">Confirm Password</label>
        <div class="input-group">
          <input type="{{ showCurrentPassword ? 'text' : 'password' }}" class="form-control" id="current_password" name="current_password" [(ngModel)]="currentPasswordAccountForm">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" (click)="showCurrentPassword = !showCurrentPassword">
              {{ showCurrentPassword ? 'Hide' : 'Show' }}
            </button>
          </div>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Update Account</button>
    </form>
  </mat-card>
</div>

<br>

<div class="container">
  <mat-card class="card">
    <div>
      <h1>Shipping Information
        <button class="btn btn-link" (click)="toggleShippingDetails()">Toggle Shipping Information Fields</button>
      </h1>
    </div>
    <form *ngIf="showShippingDetails" (ngSubmit)="onSubmitShipping()">
      <div *ngIf="!isFormValidShipping" class="alert alert-danger">Please fill in all required fields</div>
      <div *ngIf="!isFormPasswordMatchAccount" class="alert alert-danger">Password is incorrect</div>
      <div class="form-group">
        <label for="street">Street</label>
        <input type="text" class="form-control" id="street" name="street" [(ngModel)]="tmp.street">
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="number">Number</label>
          <input type="text" class="form-control" id="number" name="number" [(ngModel)]="tmp.number">
        </div>
        <div class="form-group col-md-6">
          <label for="unit">Unit (Optional)</label>
          <input type="text" class="form-control" id="unit" name="unit" [(ngModel)]="tmp.unit">
        </div>
      </div>
      <div class="form-group">
        <label for="city">City</label>
        <input type="text" class="form-control" id="city" name="city" [(ngModel)]="tmp.city">
      </div>
      <div class="form-group">
        <label for="postal_code">Postal Code</label>
        <input type="text" class="form-control" id="postal_code" name="postal_code" [(ngModel)]="tmp.postal">
      </div>
      <div class="form-group">
        <label for="phone_number">Phone Number</label>
        <input type="text" class="form-control" id="phone_number" name="phone_number" [(ngModel)]="tmp.phone">
      </div>
      <div class="form-group">
        <label for="current_password">Confirm Password</label>
        <div class="input-group">
          <input type="{{ showCurrentPassword ? 'text' : 'password' }}" class="form-control" id="current_password" name="current_password" [(ngModel)]="currentPasswordAccountForm">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" (click)="showCurrentPassword = !showCurrentPassword">
              {{ showCurrentPassword ? 'Hide' : 'Show' }}
            </button>
          </div>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Update Account</button>
      <button type="button" class="btn btn-secondary" (click)="clearShippingInfo()">Clear Shipping Info</button>
    </form>
  </mat-card>
</div>

<br>


<app-footer></app-footer>